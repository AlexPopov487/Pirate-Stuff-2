[gd_scene load_steps=45 format=3 uid="uid://cexceki4qmcr5"]

[ext_resource type="Script" uid="uid://mimm2l07qfxq" path="res://scripts/environment/ship_platform.gd" id="1_tmge3"]
[ext_resource type="Texture2D" uid="uid://cg65ln3ewjnqy" path="res://assets/Merchant Ship/Sprites/Ship/idle/idle (1).png" id="3_txfg4"]
[ext_resource type="Texture2D" uid="uid://dwh88nng8ut33" path="res://assets/Merchant Ship/Sprites/Ship/idle/idle (2).png" id="4_b2oss"]
[ext_resource type="Texture2D" uid="uid://bdiafl0thngvt" path="res://assets/Merchant Ship/Sprites/Ship/idle/idle (3).png" id="5_ovj7h"]
[ext_resource type="Texture2D" uid="uid://cqr5d34qwogw5" path="res://assets/Merchant Ship/Sprites/Ship/idle/idle (4).png" id="6_jsp0s"]
[ext_resource type="Texture2D" uid="uid://cjesglmio4135" path="res://assets/Merchant Ship/Sprites/Ship/idle/idle (5).png" id="7_c0svk"]
[ext_resource type="Texture2D" uid="uid://42wlk8clx8yp" path="res://assets/Merchant Ship/Sprites/Ship/idle/idle (6).png" id="8_ml7ks"]
[ext_resource type="Texture2D" uid="uid://030h554i6d8r" path="res://assets/Merchant Ship/Sprites/Ship/idle/idle (7).png" id="9_8lta0"]
[ext_resource type="Texture2D" uid="uid://d1ekrsuvp6ts7" path="res://assets/Merchant Ship/Sprites/Ship/idle/idle (8).png" id="10_wlvfx"]
[ext_resource type="Texture2D" uid="uid://c3r7me2haew81" path="res://assets/Merchant Ship/Sprites/Ship/sail_up/sail_up 1.png" id="11_jsp0s"]
[ext_resource type="Texture2D" uid="uid://damehkuryt3es" path="res://assets/Merchant Ship/Sprites/Ship/sail_down/sail_down (1).png" id="11_shckw"]
[ext_resource type="Texture2D" uid="uid://dnjxrxpo5ki3f" path="res://assets/Merchant Ship/Sprites/Ship/sail_down/sail_down (3).png" id="12_4gyl1"]
[ext_resource type="Texture2D" uid="uid://dvd1mhufvyf2p" path="res://assets/Merchant Ship/Sprites/Ship/sail_up/sail_up 3.png" id="12_c0svk"]
[ext_resource type="AudioStream" uid="uid://clwhawlwjkly7" path="res://audio/ship/ship_ashore.wav" id="13_4gyl1"]
[ext_resource type="Texture2D" uid="uid://bfth81u0f1l8p" path="res://assets/Merchant Ship/Sprites/Ship/sail_down/sail_down (2).png" id="13_jd0gm"]
[ext_resource type="Texture2D" uid="uid://dpp4x2j2pfroh" path="res://assets/Merchant Ship/Sprites/Ship/sail_up/sail_up 2.png" id="13_ml7ks"]
[ext_resource type="AudioStream" uid="uid://cn3lrsk4l45xd" path="res://audio/ship/ship_bell.wav" id="16_shckw"]
[ext_resource type="Texture2D" uid="uid://bynlrrbsdutkm" path="res://assets/Merchant Ship/Sprites/Ship/swim/swim (1).png" id="17_q81qp"]
[ext_resource type="Texture2D" uid="uid://drynfw2p4kog2" path="res://assets/Merchant Ship/Sprites/Ship/swim/swim (2).png" id="18_bhc2m"]
[ext_resource type="Texture2D" uid="uid://jea546d3kjv8" path="res://assets/Merchant Ship/Sprites/Ship/swim/swim (3).png" id="19_tshuf"]
[ext_resource type="Texture2D" uid="uid://dstt4fw7g4au1" path="res://assets/Merchant Ship/Sprites/Ship/swim/swim (4).png" id="20_chhef"]
[ext_resource type="AudioStream" uid="uid://dl1hqpo4jq1rq" path="res://audio/ship/ship_sailig.wav" id="22_jd0gm"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_4gyl1"]
size = Vector2(78, 21)

[sub_resource type="Animation" id="Animation_q81qp"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, -35)]
}

[sub_resource type="Animation" id="Animation_jd0gm"]
resource_name = "bounce"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(0, -35), Vector2(0, -32), Vector2(0, -35)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_bhc2m"]
_data = {
&"RESET": SubResource("Animation_q81qp"),
&"bounce": SubResource("Animation_jd0gm")
}

[sub_resource type="Animation" id="Animation_tmge3"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatableBody2D/Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [null]
}

[sub_resource type="Animation" id="Animation_5hiq2"]
resource_name = "idle"
length = 0.8
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatableBody2D/Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [ExtResource("3_txfg4"), ExtResource("4_b2oss"), ExtResource("5_ovj7h"), ExtResource("6_jsp0s"), ExtResource("7_c0svk"), ExtResource("8_ml7ks"), ExtResource("9_8lta0"), ExtResource("10_wlvfx")]
}

[sub_resource type="Animation" id="Animation_shckw"]
resource_name = "sail_down"
length = 1.4
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatableBody2D/Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [ExtResource("11_shckw"), ExtResource("13_jd0gm"), ExtResource("12_4gyl1")]
}
tracks/1/type = "audio"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("AnimatableBody2D/AudioStreamPlayer2D")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"clips": [{
"end_offset": 0.0,
"start_offset": 0.0,
"stream": ExtResource("13_4gyl1")
}],
"times": PackedFloat32Array(0)
}
tracks/1/use_blend = true
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(1.4),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"set_idle"
}]
}

[sub_resource type="Animation" id="Animation_wn022"]
resource_name = "sail_up"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatableBody2D/Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [ExtResource("11_jsp0s"), ExtResource("13_ml7ks"), ExtResource("12_c0svk")]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(1),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"set_sailing"
}]
}
tracks/2/type = "audio"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("AnimatableBody2D/AudioStreamPlayer2D")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"clips": [{
"end_offset": 0.082135,
"start_offset": 0.00609843,
"stream": ExtResource("16_shckw")
}],
"times": PackedFloat32Array(0)
}
tracks/2/use_blend = true

[sub_resource type="Animation" id="Animation_4gyl1"]
resource_name = "swim"
length = 0.8
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatableBody2D/Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [ExtResource("17_q81qp"), ExtResource("18_bhc2m"), ExtResource("19_tshuf"), ExtResource("20_chhef"), ExtResource("17_q81qp"), ExtResource("18_bhc2m"), ExtResource("19_tshuf"), ExtResource("20_chhef")]
}
tracks/1/type = "audio"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("AnimatableBody2D/AudioStreamPlayer2D")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"clips": [{
"end_offset": 18.2338,
"start_offset": 0.0471366,
"stream": ExtResource("22_jd0gm")
}],
"times": PackedFloat32Array(0)
}
tracks/1/use_blend = true

[sub_resource type="AnimationLibrary" id="AnimationLibrary_xv8ix"]
_data = {
&"RESET": SubResource("Animation_tmge3"),
&"idle": SubResource("Animation_5hiq2"),
&"sail_down": SubResource("Animation_shckw"),
&"sail_up": SubResource("Animation_wn022"),
&"swim": SubResource("Animation_4gyl1")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_shckw"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4gyl1"]
animation = &"sail_down"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jd0gm"]
animation = &"sail_up"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_q81qp"]
animation = &"swim"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bhc2m"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_tshuf"]
advance_mode = 2
advance_expression = "_current_move == MOVE_SET.GAINING_PACE"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_chhef"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_cqihn"]
advance_mode = 2
advance_expression = "_current_move == MOVE_SET.STOPPING"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_shckw"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_jd0gm"]
advance_mode = 2
advance_expression = "_current_move == MOVE_SET.SAILING"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_shckw"]
states/idle/node = SubResource("AnimationNodeAnimation_shckw")
states/idle/position = Vector2(543.604, 107.408)
states/sail_down/node = SubResource("AnimationNodeAnimation_4gyl1")
states/sail_down/position = Vector2(764.64, -19.8445)
states/sail_up/node = SubResource("AnimationNodeAnimation_jd0gm")
states/sail_up/position = Vector2(335.2, -18.96)
states/swim/node = SubResource("AnimationNodeAnimation_q81qp")
states/swim/position = Vector2(543.092, -116.7)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_bhc2m"), "idle", "sail_up", SubResource("AnimationNodeStateMachineTransition_tshuf"), "sail_up", "swim", SubResource("AnimationNodeStateMachineTransition_chhef"), "swim", "sail_down", SubResource("AnimationNodeStateMachineTransition_cqihn"), "sail_down", "idle", SubResource("AnimationNodeStateMachineTransition_shckw"), "idle", "swim", SubResource("AnimationNodeStateMachineTransition_jd0gm")]
graph_offset = Vector2(-150, -132)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_tmge3"]
size = Vector2(75, 22)

[node name="ship" type="Node2D"]
script = ExtResource("1_tmge3")

[node name="AnimatableBody2D" type="AnimatableBody2D" parent="."]
z_index = -1
position = Vector2(0, -35)
collision_mask = 257

[node name="Sprite2D" type="Sprite2D" parent="AnimatableBody2D"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="AnimatableBody2D"]
position = Vector2(1, 25)
shape = SubResource("RectangleShape2D_4gyl1")

[node name="AnimationPlayer2" type="AnimationPlayer" parent="AnimatableBody2D"]
libraries = {
&"": SubResource("AnimationLibrary_bhc2m")
}
autoplay = "bounce"

[node name="AnimationPlayer" type="AnimationPlayer" parent="AnimatableBody2D"]
root_node = NodePath("../..")
libraries = {
&"": SubResource("AnimationLibrary_xv8ix")
}
autoplay = "idle"

[node name="AnimationTree" type="AnimationTree" parent="AnimatableBody2D/AnimationPlayer"]
root_node = NodePath("../../..")
tree_root = SubResource("AnimationNodeStateMachine_shckw")
advance_expression_base_node = NodePath("../../..")
anim_player = NodePath("..")

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="AnimatableBody2D"]

[node name="Area2D" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 8388865

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
position = Vector2(2.5, -11)
shape = SubResource("RectangleShape2D_tmge3")
debug_color = Color(0.345561, 0.615334, 0.230675, 0.42)

[connection signal="area_entered" from="Area2D" to="." method="_on_area_2d_area_entered"]
[connection signal="body_entered" from="Area2D" to="." method="_on_area_2d_body_entered"]
